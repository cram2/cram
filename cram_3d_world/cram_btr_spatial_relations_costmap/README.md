cram_btr_spatial_relations_costmap
==================================

CRAM package with costmaps and keywords needed to describe spatial relations

_Costmap Keywords_  
-    _Position based_ : __:in, :on, :side, :left-of, :right-of, :in-front-of, :behind__  
-    _Height based_ : __:level, :level-invert__  
-    _Orientation based_ : __:orientation__  
-    _Distance based_ : __:near, :far-from__

Usages
------

__:in__  
  Refers to a location inside an object/container. The samples of locations would be taken from the costmap which  
   spans the bounding box of the object in the xy plane and the z coordinate would be on the lowest point of the  
   bounding box of the object.  
  ``` lisp
  (a location
  	(in
  		(an object
  			(type drawer)
  			(urdf-name sink-area-left-upper-drawer-main)
  			(part-of kitchen))))
  ;; Denotes a location on the bottom of the drawer named sink-area-left-upper-drawer-main
  ```  

__:on__  
  Refers to a location on top of an object. The samples of locations would be taken from the costmap which spans
  the bounding box of the object in the xy plane and the z coordinate would be on the highest point of the
  bounding box of the object.  
  ```lisp
  (a location
  	(on
  		(an object
  			(type counter-top)
  			(urdf-name sink-area-surface)
  			(part-of kitchen))))
  ;; Denotes a location on top of the counter named sink-area-surface
  ```  

__:side__  
  Refers to a location with respect to another costmap. The samples are taken from the costmap which is determined
  by the type of relationship mentioned with the reference costmap. Supports 4 values: _:left, :right, :front, :back_
  This keyword is used in combination with the _:in/:on_ keywords to reduce the size of the costmap to more specific
  regions. Combinations of :side can also be used, but not that the operations are conjunctive meaning that combining
  mutually exclusive regions like (side front) and (side back) on a single designator will yield no result.
  ```lisp
  (a location
  	(on
  		(an object
  			(type counter-top)
  			(urdf-name sink-area-surface)
  			(part-of kitchen)))
  	(side front))
  ;; Denotes a location on top of the counter named sink-area-surface, which is restricted to the front side

  (a location
  	(on
  		(an object
  			(type counter-top)
  			(urdf-name sink-area-surface)
  			(part-of kitchen)))
  	(side right)
  	(side front))
  ;; Denotes a location on top of the counter named sink-area-surface, which is restricted to the front-right side
  ```  


__:level__  
  Refers to different shelves/levels inside a container. Supports 4 values: _:topmost_, _:bottommost_, _:middle_
  or _a number [from 1 to total number of levels inside the container]_. The numbering starts from bottom to top.
  ``` lisp
(a location  
	(in  
		(an object  
			(type drawer)
			(urdf-name oven-area-area-right-drawer-main)
			(part-of kitchen)
			(level topmost)))) ;; Refers the topmost level inside the drawer
;; x denotes the height of the costmap inside the sample container represented
;;			|__x___|
;;			|______|
;;			|______|
;;			|______|
;;			|______|
```  

``` lisp
(a location
	(in 
		(an object
			(type drawer)
			(urdf-name oven-area-area-right-drawer-main)
			(part-of kitchen)
			(level middle)))) ;; Refers the middle level inside the drawer
;; x denotes the height of the costmap inside the sample container represented
;;			|______|
;;			|______|
;;			|__x___|
;;			|______|
;;			|______|
```  

``` lisp
(a location
	(in 
		(an object
			(type drawer)
			(urdf-name oven-area-area-right-drawer-main)
			(part-of kitchen)
			(level 2)))) ;; Refers the second level from the bottom inside the drawer
;; x denotes the height of the costmap inside the sample container represented
;;			|______|
;;			|______|
;;			|______|
;;			|___x__|
;;			|______|


```  

__:level-invert__  
  Works exactly like __:level__, except the numbering of the levels inside the container is done from top to bottom.
  The behaviour only changes when referring levels with numbers, the other keywords behave and refer the same as __:level__
  ``` lisp
  (a location
	(in 
		(an object
			(type drawer)
			(urdf-name oven-area-area-right-drawer-main)
			(part-of kitchen)
			(level-invert 2)))) ;; Refers the second level from the top inside the drawer
;; x denotes the height of the costmap inside the sample container represented
;;			|______|
;;			|__x___|
;;			|______|
;;			|______|
;;			|______|
  ```

__:orientation__  
  This keyword can be in the designators used to get desired orientation samples generated by a location designator. Supports
  the following keywords _:support-aligned, :random, :axis-aligned_. _:suport-aligned_ will provide orientation which is perpendicular
  to the closest edge of supporting object of the specified location. _:axis-aligned_ provides orientations (0 pi/2 pi 3\*pi/2) rotated
  along the z axis (cardinal directions in the xy plane). _:random_ is the default mode if the orientation keyword has not been used in
  the designator, and this provides 4 samples of random orientations rotated along the z axis.
  ``` lisp
(a location
	(on
  		(an object
  			(type counter-top)
  			(urdf-name sink-area-surface)
  			(part-of kitchen)))
	(orientation support-aligned))
;; This gives location samples on the counter top named sink-area-surface and the orientation of the samples will be perpendicular to the 
;; edge of the counter that is closest to each of the sample.

(a location
	(on
  		(an object
  			(type counter-top)
  			(urdf-name sink-area-surface)
  			(part-of kitchen)))
	(orientation axis-aligned))
;; This gives 4 copies of each of the location samples on the counter top named sink-area-surface whose orientations will be (0 pi/2 pi 3\*pi/2)
;; rotated around the z-axis.

  ```

__:left-of, :right-of, :in-front-of, :behind__   
  These keywords are used to specify locations which are relative to another position/object.
  ``` lisp
(desig:a location
    (right-of (an object (type bowl))))
;; Is a location that exists to the right of an object type bowl

(desig:a location
    (behind (an object (type cup))))
;; Is a location that exists behind an ojbect of type cup
  ```  

__:near, :far-from__  
  These keyword also denote locations relative to another position/object, but based on distance. These can also be used in conjunction with other
  spatial relation operators.
  ``` lisp  
(desig:a location
    (right-of (an object (type bowl)))
    (near (an object (type bowl))))
;; Is a location to right of an object bowl and is near to it.
  ```